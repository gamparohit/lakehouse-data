# Gold Layer Model Configuration

version: 2

models:
  - name: dim_customers
    description: Customer dimension with lifetime metrics and segmentation
    columns:
      - name: customer_id
        description: Unique customer identifier
        tests:
          - unique
          - not_null
      
      - name: lifetime_orders
        description: Total number of orders placed by customer
      
      - name: lifetime_revenue
        description: Total revenue generated by customer
      
      - name: customer_segment
        description: Customer value segment (VIP, HIGH_VALUE, MEDIUM_VALUE, LOW_VALUE, NEW)
        tests:
          - accepted_values:
              values: ['VIP', 'HIGH_VALUE', 'MEDIUM_VALUE', 'LOW_VALUE', 'NEW']
      
      - name: days_since_last_order
        description: Days since customer's last order (for churn analysis)
  
  - name: fact_orders
    description: Order fact table with denormalized customer dimensions
    columns:
      - name: order_id
        description: Unique order identifier
        tests:
          - unique
          - not_null
      
      - name: customer_id
        description: Reference to dim_customers
        tests:
          - not_null
      
      - name: order_year
        description: Year of order
      
      - name: order_month
        description: Month of order (1-12)
      
      - name: order_quarter
        description: Quarter of order (1-4)
      
      - name: customer_order_sequence
        description: Sequential order number for this customer
